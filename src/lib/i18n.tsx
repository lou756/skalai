import { createContext, useContext, useState, useCallback, type ReactNode } from 'react';

export type Locale = 'fr' | 'en';

const translations = {
  fr: {
    // Header
    'nav.howItWorks': 'Comment ça marche',
    'nav.about': 'À propos',
    'nav.methodology': 'Méthodologie',
    'nav.analyze': 'Analyser',
    // Hero
    'hero.title': 'Auditez votre site comme un expert',
    'hero.subtitle': 'Analyse SEO professionnelle, audit technique et optimisation Google Merchant — propulsé par l\'IA.',
    'hero.cta': 'Lancer une analyse gratuite',
    'hero.trusted': 'Diagnostics vérifiés • Données réelles • Transparence totale',
    // Features
    'features.seo.title': 'Audit SEO complet',
    'features.seo.desc': 'Meta tags, indexabilité, structure de contenu, liens cassés, mobile-first indexing.',
    'features.merchant.title': 'Google Merchant Center',
    'features.merchant.desc': 'Conformité produit, données structurées JSON-LD, génération de flux CSV.',
    'features.fixes.title': 'Correctifs automatiques',
    'features.fixes.desc': 'Génération de robots.txt, sitemap.xml, balises meta optimisées, données structurées.',
    'features.transparency.title': 'Transparence & fiabilité',
    'features.transparency.desc': 'Indicateurs de confiance pour chaque diagnostic. Aucune donnée simulée.',
    // How it works page
    'how.title': 'Comment fonctionne SKAL IA',
    'how.subtitle': 'Un processus d\'audit en 4 étapes, entièrement automatisé et transparent.',
    'how.step1.title': '1. Entrez votre URL',
    'how.step1.desc': 'Saisissez l\'adresse de votre site web. SKAL IA accepte tout site public accessible.',
    'how.step2.title': '2. Crawl & analyse',
    'how.step2.desc': 'Notre moteur crawle votre site, extrait le HTML, découvre toutes les URLs et analyse les données structurées.',
    'how.step3.title': '3. Diagnostic IA',
    'how.step3.desc': 'L\'IA analyse le contenu, génère des suggestions de titres et descriptions optimisés, et identifie les problèmes SEO.',
    'how.step4.title': '4. Rapport & correctifs',
    'how.step4.desc': 'Recevez un rapport complet avec score, checklist, fichiers correctifs prêts à déployer et guide d\'actions.',
    'how.backHome': '← Retour à l\'accueil',
    // About page
    'about.title': 'À propos de SKAL IA',
    'about.subtitle': 'Smart Knowledge for Analytics & Launch',
    'about.mission.title': 'Notre mission',
    'about.mission.desc': 'SKAL IA a été conçu pour démocratiser l\'audit SEO professionnel. Notre plateforme fournit des diagnostics de niveau expert, basés uniquement sur des données réelles et vérifiables.',
    'about.credibility.title': 'Crédibilité & transparence',
    'about.credibility.desc': 'Chaque diagnostic est accompagné d\'un indicateur de confiance (vérifié, partiel, incertain). Aucun résultat n\'est simulé ou inventé. Si une donnée est indisponible, c\'est clairement indiqué.',
    'about.tech.title': 'Technologies',
    'about.tech.desc': 'Crawl web via Firecrawl, analyse IA via Gemini, scoring pondéré positif sur 7 catégories, découverte exhaustive des URLs, extraction de données structurées JSON-LD.',
    'about.backHome': '← Retour à l\'accueil',
    // Scan metadata
    'scan.scannedAt': 'Scanné le',
    'scan.duration': 'Durée d\'analyse',
    'scan.pagesCrawled': 'Pages crawlées',
    'scan.elementsChecked': 'Éléments vérifiés',
    'scan.realTimeAnalysis': 'Analyse en temps réel',
    'scan.downloadJSON': 'Données brutes (JSON)',
    'scan.rescan': 'Re-scanner',
    'scan.poweredBy': 'Sources',
    // Scan progress steps
    'scan.step.validating': 'Validation de l\'URL et connexion au site...',
    'scan.step.crawling': 'Crawling du site et extraction du HTML...',
    'scan.step.analyzing': 'Analyse des balises meta, structure et contenu...',
    'scan.step.checking': 'Vérification des liens, robots.txt et sitemap...',
    'scan.step.generating': 'Découverte de toutes les URLs du site...',
    'scan.step.building': 'Génération du rapport et des correctifs IA...',
    // Search
    'search.placeholder': 'Entrez l\'URL de votre site (ex: example.com)',
    'search.button': 'Analyser',
    'search.loading': 'Analyse en cours...',
    'search.urlRequired': 'URL requise',
    'search.urlRequiredDesc': 'Veuillez entrer l\'URL du site à analyser.',
    'search.complete': 'Analyse terminée',
    'search.scoreResult': 'Score SEO : {score}/100 — {fixes} fichier(s) généré(s)',
    'search.error': 'Erreur d\'analyse',
    'search.errorDesc': 'Impossible d\'analyser ce site.',
    'search.genericError': 'Erreur',
    'search.genericErrorDesc': 'Une erreur est survenue lors de l\'analyse.',
    // Empty state
    'empty.title': 'Entrez l\'URL d\'un site pour lancer l\'analyse SEO',
    'empty.subtitle': 'SKAL IA analysera, générera les corrections et produira un rapport complet.',
    // Results
    'results.analyzedUrl': 'Analyse de',
    'results.issues': 'Problèmes détectés',
    'results.noIssues': 'Excellent ! Aucun problème SEO majeur détecté.',
    'results.highPriority': 'Haute priorité',
    'results.mediumPriority': 'Priorité moyenne',
    'results.lowPriority': 'Basse priorité',
    // Score
    'score.title': 'Score de visibilité SEO',
    'score.excellent': 'Excellent',
    'score.good': 'Bon',
    'score.needsWork': 'À améliorer',
    'score.critical': 'Critique',
    'score.breakdown': 'Détail du score',
    // Confidence
    'confidence.title': 'Niveau de confiance',
    'confidence.verified': 'Vérifié',
    'confidence.partial': 'Partiel',
    'confidence.uncertain': 'Incertain',
    'confidence.notChecked': 'Non vérifié',
    // Checklist
    'checklist.title': 'Checklist SEO',
    'checklist.validated': 'validés',
    'checklist.titlePresent': 'Balise title présente',
    'checklist.descPresent': 'Meta description présente',
    'checklist.h1Unique': 'Balise H1 unique',
    'checklist.langDefined': 'Attribut lang défini',
    'checklist.canonical': 'URL canonique définie',
    'checklist.robotsTxt': 'Fichier robots.txt présent',
    'checklist.sitemap': 'Sitemap XML trouvé',
    'checklist.sitemapValid': 'Structure sitemap valide',
    'checklist.ogTags': 'Balises Open Graph',
    'checklist.twitterCards': 'Twitter Cards',
    'checklist.viewport': 'Meta viewport (mobile)',
    'checklist.indexable': 'Page indexable',
    'checklist.nobrokenLinks': 'Aucun lien cassé',
    // Action report
    'report.title': 'Rapport d\'actions',
    'report.automated': 'Actions automatiques',
    'report.manual': 'Actions manuelles requises',
    'report.priorityHigh': 'Haute',
    'report.priorityMedium': 'Moyenne',
    'report.priorityLow': 'Basse',
    // Generated fixes
    'fixes.title': 'Fichiers générés automatiquement',
    'fixes.preview': 'Aperçu',
    'fixes.hide': 'Masquer',
    'fixes.autoGenerated': 'Auto-généré',
    'fixes.needsReview': 'À vérifier',
    // Issues
    'issue.whyProblem': 'Pourquoi c\'est un problème',
    'issue.howToFix': 'Comment corriger',
    'issue.highPriority': 'Haute priorité',
    'issue.mediumPriority': 'Priorité moyenne',
    'issue.lowPriority': 'Basse priorité',
    'issue.manual': 'Correction manuelle',
    'issue.automated': 'Automatisable',
    'issue.semiAutomated': 'Semi-automatisé',
    // Detail sections
    'detail.brokenLinks': 'Liens cassés',
    'detail.gscInstructions': 'Instructions Google Search Console',
    'detail.sitemapInfo': 'Informations Sitemap',
    'detail.sitemapUrl': 'URL du sitemap',
    'detail.sitemapUrls': 'URLs dans le sitemap',
    'detail.sitemapValid': 'Structure valide',
    'detail.yes': 'Oui',
    'detail.no': 'Non',
    'detail.contentAnalysis': 'Analyse du contenu',
    'detail.wordCount': 'Nombre de mots',
    'detail.readability': 'Score de lisibilité',
    'detail.topKeywords': 'Mots-clés principaux',
    'detail.duplicateContent': 'Contenu dupliqué détecté',
    'detail.duplicateSections': 'section(s) répétée(s)',
    'detail.aiSuggestions': 'Suggestions IA',
    'detail.suggestedTitle': 'Titre suggéré',
    'detail.suggestedDesc': 'Meta description suggérée',
    'detail.improvements': 'Améliorations recommandées',
    'detail.multilingual': 'Analyse multilingue',
    'detail.langVersions': 'Versions linguistiques détectées',
    'detail.merchant': 'Analyse Google Merchant Center',
    'detail.structuredDataFound': 'Données structurées Product (JSON-LD) détectées',
    'detail.noStructuredData': 'Aucune donnée structurée Product détectée',
    'detail.merchantGuide': 'Guide Google Merchant Center',
    'detail.inStock': 'En stock',
    'detail.outOfStock': 'Rupture',
    'detail.availability': 'Disponibilité',
    'detail.noName': 'Produit sans nom',
    // Footer
    'footer.tagline': 'Votre copilote IA pour SEO, indexation et visibilité web.',
    'footer.product': 'Produit',
    'footer.company': 'Entreprise',
    'footer.legal': 'Mentions légales',
    'footer.privacy': 'Confidentialité',
    'footer.terms': 'CGU',
    'footer.copyright': '© 2025 SKAL IA. Tous droits réservés.',
    // History
    'history.title': 'Historique des analyses',
    'history.empty': 'Aucune analyse enregistrée pour le moment.',
    'history.recent': '10 dernières',
    'history.trend': 'Évolution du score',
    'history.scans': 'scan(s)',
    'history.stable': 'Stable',
    'history.since': 'depuis le premier scan',
    // PDF
    'pdf.export': 'Exporter en PDF',
    // PageSpeed Insights
    'psi.title': 'Core Web Vitals (Google)',
    'psi.error': 'Impossible de récupérer les données PageSpeed',
    'psi.performanceScore': 'Score de performance',
    'psi.mobileStrategy': 'Mesuré sur mobile via Google PageSpeed Insights',
    'psi.lcp': 'LCP',
    'psi.lcpDesc': 'Largest Contentful Paint — temps de chargement du plus grand élément visible.',
    'psi.fcp': 'FCP',
    'psi.fcpDesc': 'First Contentful Paint — temps avant le premier affichage de contenu.',
    'psi.tbt': 'TBT',
    'psi.tbtDesc': 'Total Blocking Time — temps total de blocage du thread principal.',
    'psi.cls': 'CLS',
    'psi.clsDesc': 'Cumulative Layout Shift — stabilité visuelle de la page.',
    'psi.si': 'SI',
    'psi.siDesc': 'Speed Index — vitesse de chargement visuel de la page.',
    'psi.ttfb': 'TTFB',
    'psi.ttfbDesc': 'Time to First Byte — temps de réponse du serveur.',
    'psi.diagnostics': 'Opportunités d\'optimisation',
    'psi.source': 'Source : Google PageSpeed Insights API',
    // Errors
    'error.inaccessible': 'Inaccessible',
    'error.code': 'Erreur',
    // 404
    '404.title': 'Page introuvable',
    '404.desc': 'La page que vous cherchez n\'existe pas ou a été déplacée.',
    '404.back': 'Retour à l\'accueil',
    // Methodology page
    'method.backHome': '← Retour à l\'accueil',
    'method.badge': 'Méthodologie 100% transparente',
    'method.title': 'Notre méthodologie',
    'method.subtitle': 'Chaque donnée est vérifiable. Chaque diagnostic cite sa source. Aucune information n\'est simulée.',
    'method.techTitle': 'Technologies utilisées',
    'method.tech.firecrawl': 'Crawling web professionnel avec extraction HTML, Markdown et liens. Navigateur headless pour le rendu JavaScript.',
    'method.tech.map': 'Découverte exhaustive de toutes les URLs du site (jusqu\'à 5000) pour un sitemap complet sans exception.',
    'method.tech.ai': 'Analyse sémantique du contenu et génération de suggestions de titres et descriptions optimisés pour le SEO.',
    'method.tech.http': 'Requêtes HTTP directes pour vérifier robots.txt, sitemap.xml et détecter les liens cassés.',
    'method.processTitle': 'Processus de vérification',
    'method.step1.title': 'Validation de l\'URL',
    'method.step1.desc': 'L\'URL est formatée et vérifiée. Si le site est inaccessible, l\'analyse s\'arrête et le signale clairement.',
    'method.step2.title': 'Crawling du site',
    'method.step2.desc': 'Firecrawl extrait le HTML complet, le contenu Markdown et tous les liens de la page. Le rendu JavaScript est pris en charge.',
    'method.step3.title': 'Découverte des URLs',
    'method.step3.desc': 'L\'API Map explore l\'intégralité du site pour découvrir jusqu\'à 5000 URLs internes, garantissant un sitemap exhaustif.',
    'method.step4.title': 'Analyse technique',
    'method.step4.desc': 'Extraction des balises meta, vérification des fichiers techniques (robots.txt, sitemap.xml), test des liens, analyse du contenu.',
    'method.step5.title': 'Scoring pondéré',
    'method.step5.desc': 'Le score est calculé positivement sur 7 catégories pondérées. Chaque point gagné est justifié par une vérification réelle.',
    'method.step6.title': 'Génération du rapport',
    'method.step6.desc': 'Le rapport inclut le score, la checklist, les indicateurs de confiance, les fichiers correctifs et le rapport d\'actions.',
    'method.scoringTitle': 'Système de scoring',
    'method.scoringDesc': 'Le score SEO est calculé selon un système de points positifs pondérés sur 100. Chaque catégorie contribue proportionnellement selon son importance pour la visibilité.',
    'method.confidenceTitle': 'Indicateurs de confiance',
    'method.confidenceDesc': 'Chaque diagnostic est accompagné d\'un niveau de confiance. Si une donnée est incertaine ou indisponible, c\'est explicitement indiqué.',
    'method.conf.verified': 'Donnée extraite directement du code source ou vérifiée par requête HTTP. Fiabilité maximale.',
    'method.conf.partial': 'Donnée disponible mais potentiellement incomplète (ex: contenu chargé dynamiquement, liens limités).',
    'method.conf.uncertain': 'Donnée estimée ou non disponible. Le diagnostic le signale et recommande une vérification manuelle.',
    'method.limitsTitle': 'Limites connues',
    'method.limitsDesc': 'Par transparence, voici les limitations actuelles de l\'analyse :',
    'method.limit.cloudflare': 'Sites protégés par Cloudflare ou anti-bots : le crawling peut échouer ou retourner un contenu partiel.',
    'method.limit.auth': 'Sites nécessitant une authentification : les pages protégées ne peuvent pas être analysées.',
    'method.limit.js': 'Contenu généré uniquement par JavaScript côté client : certains éléments peuvent ne pas être détectés.',
    'method.limit.links': 'Liens cassés : seuls les 15 premiers liens sont vérifiés pour éviter les délais excessifs.',
    'method.certTitle': 'Engagements',
    'method.cert.realData': 'Données 100% réelles',
    'method.cert.noSimulation': 'Aucune simulation',
    'method.cert.transparent': 'Sources citées',
    'method.cert.gdpr': 'Conforme RGPD',
  },
  en: {
    'nav.howItWorks': 'How it works',
    'nav.about': 'About',
    'nav.methodology': 'Methodology',
    'nav.analyze': 'Analyze',
    'hero.title': 'Audit your website like an expert',
    'hero.subtitle': 'Professional SEO analysis, technical audit and Google Merchant optimization — powered by AI.',
    'hero.cta': 'Start a free analysis',
    'hero.trusted': 'Verified diagnostics • Real data • Full transparency',
    'features.seo.title': 'Full SEO Audit',
    'features.seo.desc': 'Meta tags, indexability, content structure, broken links, mobile-first indexing.',
    'features.merchant.title': 'Google Merchant Center',
    'features.merchant.desc': 'Product compliance, JSON-LD structured data, CSV feed generation.',
    'features.fixes.title': 'Automatic Fixes',
    'features.fixes.desc': 'Generated robots.txt, sitemap.xml, optimized meta tags, structured data.',
    'features.transparency.title': 'Transparency & reliability',
    'features.transparency.desc': 'Confidence indicators for every diagnostic. No simulated data.',
    'how.title': 'How SKAL IA works',
    'how.subtitle': 'A 4-step audit process, fully automated and transparent.',
    'how.step1.title': '1. Enter your URL',
    'how.step1.desc': 'Enter your website address. SKAL IA accepts any publicly accessible site.',
    'how.step2.title': '2. Crawl & analysis',
    'how.step2.desc': 'Our engine crawls your site, extracts HTML, discovers all URLs and analyzes structured data.',
    'how.step3.title': '3. AI Diagnostic',
    'how.step3.desc': 'AI analyzes content, generates optimized title and description suggestions, and identifies SEO issues.',
    'how.step4.title': '4. Report & fixes',
    'how.step4.desc': 'Receive a comprehensive report with score, checklist, ready-to-deploy fix files and action guide.',
    'how.backHome': '← Back to home',
    'about.title': 'About SKAL IA',
    'about.subtitle': 'Smart Knowledge for Analytics & Launch',
    'about.mission.title': 'Our mission',
    'about.mission.desc': 'SKAL IA was designed to democratize professional SEO auditing. Our platform delivers expert-level diagnostics based solely on real, verifiable data.',
    'about.credibility.title': 'Credibility & transparency',
    'about.credibility.desc': 'Every diagnostic includes a confidence indicator (verified, partial, uncertain). No result is simulated or fabricated. If data is unavailable, it is clearly stated.',
    'about.tech.title': 'Technologies',
    'about.tech.desc': 'Web crawling via Firecrawl, AI analysis via Gemini, weighted positive scoring across 7 categories, exhaustive URL discovery, JSON-LD structured data extraction.',
    'about.backHome': '← Back to home',
    // Scan metadata
    'scan.scannedAt': 'Scanned at',
    'scan.duration': 'Analysis duration',
    'scan.pagesCrawled': 'Pages crawled',
    'scan.elementsChecked': 'Elements checked',
    'scan.realTimeAnalysis': 'Real-time analysis',
    'scan.downloadJSON': 'Raw data (JSON)',
    'scan.rescan': 'Re-scan',
    'scan.poweredBy': 'Sources',
    'scan.step.validating': 'Validating URL and connecting to site...',
    'scan.step.crawling': 'Crawling site and extracting HTML...',
    'scan.step.analyzing': 'Analyzing meta tags, structure and content...',
    'scan.step.checking': 'Checking links, robots.txt and sitemap...',
    'scan.step.generating': 'Discovering all site URLs...',
    'scan.step.building': 'Generating report and AI fixes...',
    'search.placeholder': 'Enter your website URL (e.g. example.com)',
    'search.button': 'Analyze',
    'search.loading': 'Analyzing...',
    'search.urlRequired': 'URL required',
    'search.urlRequiredDesc': 'Please enter the URL of the site to analyze.',
    'search.complete': 'Analysis complete',
    'search.scoreResult': 'SEO Score: {score}/100 — {fixes} file(s) generated',
    'search.error': 'Analysis error',
    'search.errorDesc': 'Unable to analyze this site.',
    'search.genericError': 'Error',
    'search.genericErrorDesc': 'An error occurred during analysis.',
    'empty.title': 'Enter a website URL to start the SEO analysis',
    'empty.subtitle': 'SKAL IA will analyze, generate fixes and produce a comprehensive report.',
    'results.analyzedUrl': 'Analysis of',
    'results.issues': 'Issues detected',
    'results.noIssues': 'Excellent! No major SEO issues detected.',
    'results.highPriority': 'High priority',
    'results.mediumPriority': 'Medium priority',
    'results.lowPriority': 'Low priority',
    'score.title': 'SEO Visibility Score',
    'score.excellent': 'Excellent',
    'score.good': 'Good',
    'score.needsWork': 'Needs improvement',
    'score.critical': 'Critical',
    'score.breakdown': 'Score breakdown',
    'confidence.title': 'Confidence level',
    'confidence.verified': 'Verified',
    'confidence.partial': 'Partial',
    'confidence.uncertain': 'Uncertain',
    'confidence.notChecked': 'Not checked',
    'checklist.title': 'SEO Checklist',
    'checklist.validated': 'validated',
    'checklist.titlePresent': 'Title tag present',
    'checklist.descPresent': 'Meta description present',
    'checklist.h1Unique': 'Unique H1 tag',
    'checklist.langDefined': 'Language attribute defined',
    'checklist.canonical': 'Canonical URL defined',
    'checklist.robotsTxt': 'robots.txt file present',
    'checklist.sitemap': 'XML Sitemap found',
    'checklist.sitemapValid': 'Valid sitemap structure',
    'checklist.ogTags': 'Open Graph tags',
    'checklist.twitterCards': 'Twitter Cards',
    'checklist.viewport': 'Viewport meta (mobile)',
    'checklist.indexable': 'Page indexable',
    'checklist.nobrokenLinks': 'No broken links',
    'report.title': 'Action Report',
    'report.automated': 'Automated actions',
    'report.manual': 'Manual actions required',
    'report.priorityHigh': 'High',
    'report.priorityMedium': 'Medium',
    'report.priorityLow': 'Low',
    'fixes.title': 'Auto-generated files',
    'fixes.preview': 'Preview',
    'fixes.hide': 'Hide',
    'fixes.autoGenerated': 'Auto-generated',
    'fixes.needsReview': 'Needs review',
    'issue.whyProblem': 'Why this is a problem',
    'issue.howToFix': 'How to fix',
    'issue.highPriority': 'High priority',
    'issue.mediumPriority': 'Medium priority',
    'issue.lowPriority': 'Low priority',
    'issue.manual': 'Manual fix',
    'issue.automated': 'Automatable',
    'issue.semiAutomated': 'Semi-automated',
    'detail.brokenLinks': 'Broken links',
    'detail.gscInstructions': 'Google Search Console Instructions',
    'detail.sitemapInfo': 'Sitemap Information',
    'detail.sitemapUrl': 'Sitemap URL',
    'detail.sitemapUrls': 'URLs in sitemap',
    'detail.sitemapValid': 'Valid structure',
    'detail.yes': 'Yes',
    'detail.no': 'No',
    'detail.contentAnalysis': 'Content Analysis',
    'detail.wordCount': 'Word count',
    'detail.readability': 'Readability score',
    'detail.topKeywords': 'Top keywords',
    'detail.duplicateContent': 'Duplicate content detected',
    'detail.duplicateSections': 'repeated section(s)',
    'detail.aiSuggestions': 'AI Suggestions',
    'detail.suggestedTitle': 'Suggested title',
    'detail.suggestedDesc': 'Suggested meta description',
    'detail.improvements': 'Recommended improvements',
    'detail.multilingual': 'Multilingual Analysis',
    'detail.langVersions': 'Detected language versions',
    'detail.merchant': 'Google Merchant Center Analysis',
    'detail.structuredDataFound': 'Product structured data (JSON-LD) detected',
    'detail.noStructuredData': 'No Product structured data detected',
    'detail.merchantGuide': 'Google Merchant Center Guide',
    'detail.inStock': 'In stock',
    'detail.outOfStock': 'Out of stock',
    'detail.availability': 'Availability',
    'detail.noName': 'Unnamed product',
    'footer.tagline': 'Your AI copilot for SEO, indexing and web visibility.',
    'footer.product': 'Product',
    'footer.company': 'Company',
    'footer.legal': 'Legal notice',
    'footer.privacy': 'Privacy',
    'footer.terms': 'Terms',
    'footer.copyright': '© 2025 SKAL IA. All rights reserved.',
    'error.inaccessible': 'Inaccessible',
    'error.code': 'Error',
    // 404
    '404.title': 'Page not found',
    '404.desc': 'The page you\'re looking for doesn\'t exist or has been moved.',
    '404.back': 'Back to home',
    // Methodology page
    'method.backHome': '← Back to home',
    'method.badge': '100% Transparent Methodology',
    'method.title': 'Our Methodology',
    'method.subtitle': 'Every data point is verifiable. Every diagnostic cites its source. No information is simulated.',
    'method.techTitle': 'Technologies Used',
    'method.tech.firecrawl': 'Professional web crawling with HTML, Markdown and links extraction. Headless browser for JavaScript rendering.',
    'method.tech.map': 'Exhaustive discovery of all site URLs (up to 5,000) for a complete sitemap without exceptions.',
    'method.tech.ai': 'Semantic content analysis and generation of SEO-optimized title and description suggestions.',
    'method.tech.http': 'Direct HTTP requests to verify robots.txt, sitemap.xml and detect broken links.',
    'method.processTitle': 'Verification Process',
    'method.step1.title': 'URL Validation',
    'method.step1.desc': 'The URL is formatted and verified. If the site is inaccessible, the analysis stops and clearly reports it.',
    'method.step2.title': 'Site Crawling',
    'method.step2.desc': 'Firecrawl extracts the full HTML, Markdown content and all page links. JavaScript rendering is supported.',
    'method.step3.title': 'URL Discovery',
    'method.step3.desc': 'The Map API explores the entire site to discover up to 5,000 internal URLs, ensuring an exhaustive sitemap.',
    'method.step4.title': 'Technical Analysis',
    'method.step4.desc': 'Meta tag extraction, technical file verification (robots.txt, sitemap.xml), link testing, content analysis.',
    'method.step5.title': 'Weighted Scoring',
    'method.step5.desc': 'The score is positively calculated across 7 weighted categories. Every earned point is justified by a real verification.',
    'method.step6.title': 'Report Generation',
    'method.step6.desc': 'The report includes score, checklist, confidence indicators, fix files and action report.',
    'method.scoringTitle': 'Scoring System',
    'method.scoringDesc': 'The SEO score is calculated using a weighted positive point system out of 100. Each category contributes proportionally based on its importance for visibility.',
    'method.confidenceTitle': 'Confidence Indicators',
    'method.confidenceDesc': 'Every diagnostic comes with a confidence level. If data is uncertain or unavailable, it is explicitly stated.',
    'method.conf.verified': 'Data extracted directly from source code or verified via HTTP request. Maximum reliability.',
    'method.conf.partial': 'Data available but potentially incomplete (e.g., dynamically loaded content, limited links).',
    'method.conf.uncertain': 'Data estimated or unavailable. The diagnostic flags it and recommends manual verification.',
    'method.limitsTitle': 'Known Limitations',
    'method.limitsDesc': 'For transparency, here are the current analysis limitations:',
    'method.limit.cloudflare': 'Sites protected by Cloudflare or anti-bots: crawling may fail or return partial content.',
    'method.limit.auth': 'Sites requiring authentication: protected pages cannot be analyzed.',
    'method.limit.js': 'Content generated solely by client-side JavaScript: some elements may not be detected.',
    'method.limit.links': 'Broken links: only the first 15 links are checked to avoid excessive delays.',
    'method.certTitle': 'Commitments',
    'method.cert.realData': '100% Real Data',
    'method.cert.noSimulation': 'No Simulation',
    'method.cert.transparent': 'Sources Cited',
    'method.cert.gdpr': 'GDPR Compliant',
    // History
    'history.title': 'Scan History',
    'history.empty': 'No scans recorded yet.',
    'history.recent': 'Last 10',
    'history.trend': 'Score evolution',
    'history.scans': 'scan(s)',
    'history.stable': 'Stable',
    'history.since': 'since first scan',
    // PDF
    'pdf.export': 'Export PDF',
    // PageSpeed Insights
    'psi.title': 'Core Web Vitals (Google)',
    'psi.error': 'Unable to fetch PageSpeed data',
    'psi.performanceScore': 'Performance Score',
    'psi.mobileStrategy': 'Measured on mobile via Google PageSpeed Insights',
    'psi.lcp': 'LCP',
    'psi.lcpDesc': 'Largest Contentful Paint — loading time of the largest visible element.',
    'psi.fcp': 'FCP',
    'psi.fcpDesc': 'First Contentful Paint — time until first content is rendered.',
    'psi.tbt': 'TBT',
    'psi.tbtDesc': 'Total Blocking Time — total time the main thread was blocked.',
    'psi.cls': 'CLS',
    'psi.clsDesc': 'Cumulative Layout Shift — visual stability of the page.',
    'psi.si': 'SI',
    'psi.siDesc': 'Speed Index — how quickly page content is visually populated.',
    'psi.ttfb': 'TTFB',
    'psi.ttfbDesc': 'Time to First Byte — server response time.',
    'psi.diagnostics': 'Optimization opportunities',
    'psi.source': 'Source: Google PageSpeed Insights API',
  },
} as const;

type TranslationKey = keyof typeof translations.fr;

interface I18nContextType {
  locale: Locale;
  setLocale: (locale: Locale) => void;
  t: (key: TranslationKey, params?: Record<string, string | number>) => string;
}

const I18nContext = createContext<I18nContextType | null>(null);

export function I18nProvider({ children }: { children: ReactNode }) {
  const [locale, setLocale] = useState<Locale>('fr');

  const t = useCallback((key: TranslationKey, params?: Record<string, string | number>): string => {
    let text: string = translations[locale]?.[key] || translations.fr[key] || key;
    if (params) {
      Object.entries(params).forEach(([k, v]) => {
        text = text.replace(`{${k}}`, String(v));
      });
    }
    return text;
  }, [locale]);

  return (
    <I18nContext.Provider value={{ locale, setLocale, t }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error('useI18n must be used within I18nProvider');
  return ctx;
}
